<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <!-- ‚≠ê This is the missing piece that fixes the zoom issue -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <title>Fitness Planner</title>

    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    background: black;
  }

  #root {
    height: 100%;
    width: 100%;
  }

  .soft-border {
    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.06);
  }

  .glass-nav {
    background: rgba(28, 28, 30, 0.9);
    backdrop-filter: blur(20px);
  }
</style>

  </head>

  <body class="bg-black text-white">
    <div id="root"></div>

    <script type="text/babel">
      const WEEK_DAYS = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"];

      function ProgressRing({ value, goal, label }) {
        const radius = 28;
        const stroke = 6;
        const normalizedRadius = radius - stroke;
        const circumference = normalizedRadius * 2 * Math.PI;
        const progress = Math.min(value / Math.max(goal, 1), 1);
        const strokeDashoffset = circumference - progress * circumference;

        return (
          <div className="flex flex-col items-center">
            <svg height={radius * 2} width={radius * 2}>
              <circle
                stroke="#2C2C2E"
                fill="transparent"
                strokeWidth={stroke}
                r={normalizedRadius}
                cx={radius}
                cy={radius}
              />
              <circle
                stroke="#34C759"
                fill="transparent"
                strokeWidth={stroke}
                strokeLinecap="round"
                r={normalizedRadius}
                cx={radius}
                cy={radius}
                strokeDasharray={circumference + " " + circumference}
                strokeDashoffset={strokeDashoffset}
                style={{ transition: "stroke-dashoffset 0.35s" }}
              />
            </svg>
            <p className="text-xs mt-1 text-[#8E8E93]">{label}</p>
            <p className="text-sm font-semibold mt-0.5">
              {value}/{goal}
            </p>
          </div>
        );
      }

      function App() {
        const today = new Date();
        const [tab, setTab] = React.useState("home");

        // SETTINGS
        const [userName, setUserName] = React.useState(
          localStorage.getItem("userName") || "Joby"
        );
        const [weeklyGymGoal, setWeeklyGymGoal] = React.useState(
          Number(localStorage.getItem("weeklyGymGoal") || 3)
        );
        const [weeklyRunGoal, setWeeklyRunGoal] = React.useState(
          Number(localStorage.getItem("weeklyRunGoal") || 3)
        );
        const [monthlyWorkoutGoal, setMonthlyWorkoutGoal] = React.useState(
          Number(localStorage.getItem("monthlyWorkoutGoal") || 16)
        );

        // ROUTINES
        const [gymPlan, setGymPlan] = React.useState(() => {
          const saved = localStorage.getItem("gymPlan_v1");
          return saved ? JSON.parse(saved) : {};
        });

        const [runPlan, setRunPlan] = React.useState(() => {
          const saved = localStorage.getItem("runPlan_v1");
          return saved ? JSON.parse(saved) : {};
        });

        // LOGS
        const [workoutLogs, setWorkoutLogs] = React.useState(() => {
          const saved = localStorage.getItem("workoutLogs_v1");
          return saved ? JSON.parse(saved) : [];
        });

        const [runLogs, setRunLogs] = React.useState(() => {
          const saved = localStorage.getItem("runLogs_v1");
          return saved ? JSON.parse(saved) : [];
        });

        // MODALS
        const [showGymCreator, setShowGymCreator] = React.useState(false);
        const [showRunCreator, setShowRunCreator] = React.useState(false);
        const [showCreateChooser, setShowCreateChooser] = React.useState(false);

        // GYM CREATOR
        const [newRoutineName, setNewRoutineName] = React.useState("");
        const [newExerciseName, setNewExerciseName] = React.useState("");
        const [newExerciseSets, setNewExerciseSets] = React.useState("");
        const [newExerciseReps, setNewExerciseReps] = React.useState("");
        const [tempExercises, setTempExercises] = React.useState([]);

        // RUN CREATOR
        const [newRunType, setNewRunType] = React.useState("");
        const [newRunDistance, setNewRunDistance] = React.useState("");
        const [newRunPace, setNewRunPace] = React.useState("");

        // ACTIVE WORKOUT
        const [activeWorkout, setActiveWorkout] = React.useState(null);

        // CALENDAR
        const [calendarDate, setCalendarDate] = React.useState(
          new Date(today.getFullYear(), today.getMonth(), 1)
        );
        const [selectedDay, setSelectedDay] = React.useState({
          date: today,
        });

        // PERSIST
        React.useEffect(() => {
          localStorage.setItem("userName", userName);
        }, [userName]);

        React.useEffect(() => {
          localStorage.setItem("weeklyGymGoal", weeklyGymGoal);
        }, [weeklyGymGoal]);

        React.useEffect(() => {
          localStorage.setItem("weeklyRunGoal", weeklyRunGoal);
        }, [weeklyRunGoal]);

        React.useEffect(() => {
          localStorage.setItem("monthlyWorkoutGoal", monthlyWorkoutGoal);
        }, [monthlyWorkoutGoal]);

        React.useEffect(() => {
          localStorage.setItem("gymPlan_v1", JSON.stringify(gymPlan));
        }, [gymPlan]);

        React.useEffect(() => {
          localStorage.setItem("runPlan_v1", JSON.stringify(runPlan));
        }, [runPlan]);

        React.useEffect(() => {
          localStorage.setItem("workoutLogs_v1", JSON.stringify(workoutLogs));
        }, [workoutLogs]);

        React.useEffect(() => {
          localStorage.setItem("runLogs_v1", JSON.stringify(runLogs));
        }, [runLogs]);

        // HELPERS
        function saveSettings() {
          // already persisted via useEffect
        }

        function addTempExercise() {
          if (!newExerciseName || !newExerciseSets || !newExerciseReps) return;
          setTempExercises((prev) => [
            ...prev,
            {
              name: newExerciseName,
              sets: Number(newExerciseSets),
              reps: Number(newExerciseReps),
            },
          ]);
          setNewExerciseName("");
          setNewExerciseSets("");
          setNewExerciseReps("");
        }

        function saveNewRoutine() {
          if (!newRoutineName || tempExercises.length === 0) return;
          // Save as a generic routine not tied to a day yet
          // In this version, we only assign via day buttons
          setNewRoutineName("");
          setTempExercises([]);
          setShowGymCreator(false);
        }

        function saveNewRoutineToDay(day) {
          if (!newRoutineName || tempExercises.length === 0) return;
          setGymPlan((prev) => ({
            ...prev,
            [day]: {
              name: newRoutineName,
              exercises: tempExercises,
            },
          }));
          setNewRoutineName("");
          setTempExercises([]);
          setShowGymCreator(false);
        }

        function saveNewRunRoutine() {
          if (!newRunType || !newRunDistance || !newRunPace) return;
          setNewRunType("");
          setNewRunDistance("");
          setNewRunPace("");
          setShowRunCreator(false);
        }

        function saveNewRunRoutineToDay(day) {
          if (!newRunType || !newRunDistance || !newRunPace) return;
          setRunPlan((prev) => ({
            ...prev,
            [day]: {
              type: newRunType,
              distance: Number(newRunDistance),
              pace: newRunPace,
            },
          }));
          setNewRunType("");
          setNewRunDistance("");
          setNewRunPace("");
          setShowRunCreator(false);
        }

        function deleteGymRoutine(name) {
          const updated = { ...gymPlan };
          for (const day of WEEK_DAYS) {
            if (updated[day] && updated[day].name === name) {
              delete updated[day];
            }
          }
          setGymPlan(updated);
        }

        function deleteRunRoutine(type) {
          const updated = { ...runPlan };
          for (const day of WEEK_DAYS) {
            if (updated[day] && updated[day].type === type) {
              delete updated[day];
            }
          }
          setRunPlan(updated);
        }

        function startWorkout(routine) {
          const completed = routine.exercises.map((ex) =>
            Array(ex.sets).fill(false)
          );
          setActiveWorkout({
            routine,
            completed,
            resting: false,
            restTime: 0,
          });
          setTab("workout");
        }

        function completeSet(exIndex, setIndex) {
          if (!activeWorkout) return;
          const newCompleted = activeWorkout.completed.map((row, i) =>
            row.map((done, j) =>
              i === exIndex && j === setIndex ? true : done
            )
          );

          const allDone = newCompleted.every((row) => row.every((d) => d));

          setActiveWorkout((prev) => ({
            ...prev,
            completed: newCompleted,
          }));

          if (allDone) {
            // Log workout
            setWorkoutLogs((prev) => [
              ...prev,
              {
                timestamp: new Date().toISOString(),
                type: "gym",
              },
            ]);
          }
        }

        function finishWorkout() {
          setActiveWorkout(null);
          setTab("home");
        }

        function logRunForToday() {
          setRunLogs((prev) => [
            ...prev,
            {
              timestamp: new Date().toISOString(),
              type: "run",
            },
          ]);
        }

        // STATS
        const currentMonthIndex = today.getMonth();
        const currentYear = today.getFullYear();

        const workoutsThisMonth = workoutLogs.filter((log) => {
          const d = new Date(log.timestamp);
          return (
            d.getMonth() === currentMonthIndex &&
            d.getFullYear() === currentYear
          );
        }).length;

        const runsThisMonth = runLogs.filter((log) => {
          const d = new Date(log.timestamp);
          return (
            d.getMonth() === currentMonthIndex &&
            d.getFullYear() === currentYear
          );
        }).length;

        const weeksInMonth = Math.ceil(
          new Date(currentYear, currentMonthIndex + 1, 0).getDate() / 7
        );
        const monthlyRunGoalCalculated = weeklyRunGoal * weeksInMonth;

        const weeklyRunsPlanned = WEEK_DAYS.reduce((count, day) => {
          return runPlan[day] ? count + 1 : count;
        }, 0);

        const weeklyGymsPlanned = WEEK_DAYS.reduce((count, day) => {
          return gymPlan[day] ? count + 1 : count;
        }, 0);

        // CALENDAR DATA
        const calYear = calendarDate.getFullYear();
        const calMonth = calendarDate.getMonth();
        const firstDayOfMonth = new Date(calYear, calMonth, 1);
        const lastDayOfMonth = new Date(calYear, calMonth + 1, 0);
        const startWeekday = (firstDayOfMonth.getDay() + 6) % 7; // Mon=0
        const daysInMonth = lastDayOfMonth.getDate();

        const calendarCells = [];
        for (let i = 0; i < startWeekday; i++) {
          calendarCells.push(null);
        }
        for (let d = 1; d <= daysInMonth; d++) {
          calendarCells.push(new Date(calYear, calMonth, d));
        }

        // Heatmap + dot info
        const activityByDateKey = {};

        workoutLogs.forEach((log) => {
          const d = new Date(log.timestamp);
          if (d.getMonth() === calMonth && d.getFullYear() === calYear) {
            const key = d.toDateString();
            if (!activityByDateKey[key]) {
              activityByDateKey[key] = { gym: 0, run: 0 };
            }
            activityByDateKey[key].gym += 1;
          }
        });

        runLogs.forEach((log) => {
          const d = new Date(log.timestamp);
          if (d.getMonth() === calMonth && d.getFullYear() === calYear) {
            const key = d.toDateString();
            if (!activityByDateKey[key]) {
              activityByDateKey[key] = { gym: 0, run: 0 };
            }
            activityByDateKey[key].run += 1;
          }
        });

        const monthData = Array(daysInMonth).fill(0);
        for (let d = 1; d <= daysInMonth; d++) {
          const date = new Date(calYear, calMonth, d);
          const key = date.toDateString();
          if (activityByDateKey[key]) {
            monthData[d - 1] =
              activityByDateKey[key].gym + activityByDateKey[key].run;
          }
        }

        function getHeatColor(count) {
          if (count === 0) return "transparent";
          if (count === 1) return "rgba(52,199,89,0.25)";
          if (count === 2) return "rgba(52,199,89,0.45)";
          if (count === 3) return "rgba(52,199,89,0.7)";
          return "rgba(255,59,48,0.7)";
        }

        // HOME TAB
        const HomeTab = (
          <div className="w-full h-screen overflow-y-auto bg-black pb-32 px-4 pt-6">
            {/* HEADER */}
            <div className="flex items-center justify-between mb-6">
              <div>
                <p className="text-sm text-[#8E8E93]">Good job,</p>
                <h1 className="text-2xl font-semibold">{userName}</h1>
              </div>
            </div>

            {/* RINGS */}
            <div className="flex justify-between mb-6">
              <ProgressRing
                value={weeklyGymsPlanned}
                goal={weeklyGymGoal}
                label="Gym this week"
              />
              <ProgressRing
                value={weeklyRunsPlanned}
                goal={weeklyRunGoal}
                label="Runs this week"
              />
              <ProgressRing
                value={workoutsThisMonth}
                goal={monthlyWorkoutGoal}
                label="Workouts this month"
              />
              <ProgressRing
                value={runsThisMonth}
                goal={monthlyRunGoalCalculated}
                label="Runs this month"
              />
            </div>

            {/* QUICK ACTIONS */}
            <div className="mb-5 flex gap-2">
              <button
                onClick={() => {
                  setShowGymCreator(true);
                }}
                className="flex-1 bg-[#1C1C1E] soft-border rounded-2xl py-2.5 text-sm font-semibold flex items-center justify-center gap-2"
              >
                <span>üèãÔ∏è</span>
                <span>New Workout</span>
              </button>

              <button
                onClick={() => {
                  setShowRunCreator(true);
                }}
                className="flex-1 bg-[#1C1C1E] soft-border rounded-2xl py-2.5 text-sm font-semibold flex items-center justify-center gap-2"
              >
                <span>üèÉ‚Äç‚ôÇÔ∏è</span>
                <span>New Run</span>
              </button>
            </div>

            {/* TODAY PREVIEW */}
            <div className="mb-6">
              <h2 className="text-lg font-semibold mb-2">Today</h2>

              {/* GYM PREVIEW */}
              {(() => {
                const weekdayIndex = (today.getDay() + 6) % 7;
                const weekday = WEEK_DAYS[weekdayIndex];
                const routine = gymPlan[weekday];

                if (!routine) {
                  return (
                    <p className="text-sm text-[#8E8E93] mb-4">
                      No gym workout planned
                    </p>
                  );
                }

                return (
                  <div className="mb-4 bg-[#1C1C1E] p-4 rounded-xl soft-border">
                    <p className="text-blue-400 text-sm font-semibold mb-1">
                      Gym: {routine.name}
                    </p>
                    <p className="text-sm text-[#8E8E93] mb-2">
                      {routine.exercises.length} exercises
                    </p>

                    <button
                      onClick={() => deleteGymRoutine(routine.name)}
                      className="w-full bg-red-500 text-white rounded-xl py-2 mt-3 font-semibold"
                    >
                      Delete Workout
                    </button>

                    <button
                      onClick={() => startWorkout(routine)}
                      className="w-full bg-white text-black rounded-xl py-3 font-semibold mt-3"
                    >
                      Start Today‚Äôs Workout
                    </button>
                  </div>
                );
              })()}

              {/* RUN PREVIEW */}
              {(() => {
                const weekdayIndex = (today.getDay() + 6) % 7;
                const weekday = WEEK_DAYS[weekdayIndex];
                const routine = runPlan[weekday];

                if (!routine) {
                  return (
                    <p className="text-sm text-[#8E8E93] mb-4">
                      No running routine
                    </p>
                  );
                }

                return (
                  <div className="mb-4 bg-[#1C1C1E] p-4 rounded-xl soft-border">
                    <p className="text-blue-400 text-sm font-semibold mb-1">
                      Run: {routine.type}
                    </p>
                    <p className="text-sm text-[#8E8E93]">
                      {routine.distance} km ‚Äî {routine.pace}
                    </p>

                    <button
                      onClick={() => deleteRunRoutine(routine.type)}
                      className="w-full bg-red-500 text-white rounded-xl py-2 mt-3 font-semibold"
                    >
                      Delete Run
                    </button>

                    <button
                      onClick={() => logRunForToday()}
                      className="w-full bg-white text-black rounded-xl py-3 font-semibold mt-3"
                    >
                      Mark Run Done
                    </button>
                  </div>
                );
              })()}
            </div>

            {/* MONTHLY GOAL CARD */}
            <div className="bg-[#1C1C1E] soft-border rounded-2xl p-4 mb-6">
              <p className="text-xs text-[#8E8E93] mb-1">Monthly Overview</p>
              <div className="flex justify-between">
                <div>
                  <p className="text-[11px] uppercase tracking-wide mb-1">
                    Workouts this month
                  </p>
                  <p className="text-sm text-white font-semibold">
                    {workoutsThisMonth}/{monthlyWorkoutGoal}
                  </p>
                </div>
                <div>
                  <p className="text-[11px] uppercase tracking-wide mb-1">
                    Runs this month
                  </p>
                  <p className="text-sm text-white font-semibold">
                    {runsThisMonth}/{monthlyRunGoalCalculated}
                  </p>
                </div>
              </div>
            </div>
          </div>
        );

        // CALENDAR TAB
        const CalendarTab = (
          <div className="w-full h-screen overflow-y-auto bg-black pb-32 px-4 pt-6">
            <div className="flex items-center justify-between mb-4">
              <button
                onClick={() =>
                  setCalendarDate(
                    new Date(calYear, calMonth - 1, 1)
                  )
                }
              >
                ‚óÄ
              </button>
              <h2 className="text-lg font-semibold">
                {calendarDate.toLocaleString("default", {
                  month: "long",
                })}{" "}
                {calYear}
              </h2>
              <button
                onClick={() =>
                  setCalendarDate(
                    new Date(calYear, calMonth + 1, 1)
                  )
                }
              >
                ‚ñ∂
              </button>
            </div>

            <div className="grid grid-cols-7 text-center text-xs text-[#8E8E93] mb-1">
              {["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"].map((d) => (
                <div key={d}>{d}</div>
              ))}
            </div>

            <div className="grid grid-cols-7 gap-1 text-sm">
              {calendarCells.map((date, idx) => {
                if (!date) return <div key={idx}></div>;

                const key = date.toDateString();
                const activity = activityByDateKey[key] || {
                  gym: 0,
                  run: 0,
                };
                const isToday =
                  date.toDateString() === today.toDateString();

                let dot = null;
                if (activity.gym && activity.run) {
                  dot = (
                    <div className="w-1.5 h-1.5 bg-red-500 rounded-full mx-auto mt-1"></div>
                  );
                } else if (activity.gym) {
                  dot = (
                    <div className="w-1.5 h-1.5 bg-green-500 rounded-full mx-auto mt-1"></div>
                  );
                } else if (activity.run) {
                  dot = (
                    <div className="w-1.5 h-1.5 bg-blue-400 rounded-full mx-auto mt-1"></div>
                  );
                }

                const heatColor = getHeatColor(
                  activity.gym + activity.run
                );

                return (
                  <button
                    key={idx}
                    onClick={() => setSelectedDay({ date })}
                    className="h-10 flex flex-col items-center justify-center rounded-lg"
                    style={{ backgroundColor: heatColor }}
                  >
                    <span
                      className={
                        "text-sm " +
                        (isToday ? "text-white font-semibold" : "")
                      }
                    >
                      {date.getDate()}
                    </span>
                    {dot}
                  </button>
                );
              })}
            </div>

            {/* MONTHLY GRAPH */}
            <div className="mt-6">
              <h3 className="text-lg font-semibold mb-2">
                Monthly Activity
              </h3>
              <div className="flex gap-1 items-end h-24">
                {monthData.map((v, i) => (
                  <div
                    key={i}
                    className="bg-green-500 w-1 rounded"
                    style={{ height: `${v * 12}px` }}
                  ></div>
                ))}
              </div>
              <p className="text-xs text-[#8E8E93] mt-1">
                Bars show total workouts + runs per day
              </p>
            </div>
          </div>
        );

        // SETTINGS PAGE
        const SettingsPage = (
          <div className="w-full h-screen overflow-y-auto bg-black px-4 pt-6 pb-32">
            <h1 className="text-3xl font-semibold mb-6">Settings</h1>

            <label className="text-sm text-[#8E8E93]">Your Name</label>
            <input
              type="text"
              placeholder="Enter your name"
              className="w-full mb-4 p-3 rounded-xl bg-[#1C1C1E] soft-border"
              value={userName}
              onChange={(e) => setUserName(e.target.value)}
            />

            <label className="text-sm text-[#8E8E93]">
              Weekly Gym Goal
            </label>
            <input
              type="number"
              className="w-full mb-4 p-3 rounded-xl bg-[#1C1C1E] soft-border"
              value={weeklyGymGoal}
              onChange={(e) =>
                setWeeklyGymGoal(Number(e.target.value))
              }
            />

            <label className="text-sm text-[#8E8E93]">
              Weekly Run Goal
            </label>
            <input
              type="number"
              className="w-full mb-4 p-3 rounded-xl bg-[#1C1C1E] soft-border"
              value={weeklyRunGoal}
              onChange={(e) =>
                setWeeklyRunGoal(Number(e.target.value))
              }
            />

            <label className="text-sm text-[#8E8E93]">
              Monthly Workout Goal
            </label>
            <input
              type="number"
              className="w-full mb-6 p-3 rounded-xl bg-[#1C1C1E] soft-border"
              value={monthlyWorkoutGoal}
              onChange={(e) =>
                setMonthlyWorkoutGoal(Number(e.target.value))
              }
            />

            <button
              onClick={() => {
                saveSettings();
                setTab("home");
              }}
              className="w-full bg-white text-black rounded-xl py-3 font-semibold"
            >
              Save Settings
            </button>
          </div>
        );

        // WORKOUT TAB
        const WorkoutTab = activeWorkout && (
          <div className="w-full h-screen overflow-y-auto bg-black pb-32 px-4 pt-6">
            <h2 className="text-2xl font-semibold mb-4">
              {activeWorkout.routine.name}
            </h2>

            {activeWorkout.routine.exercises.map((ex, exIndex) => (
              <div
                key={exIndex}
                className="mb-4 bg-[#1C1C1E] p-4 rounded-xl soft-border"
              >
                <p className="font-semibold mb-1">{ex.name}</p>
                <p className="text-xs text-[#8E8E93] mb-2">
                  {ex.sets} sets ‚Äî {ex.reps} reps
                </p>

                <div className="space-y-2">
                  {Array.from({ length: ex.sets }).map((_, setIndex) => {
                    const done =
                      activeWorkout.completed[exIndex] &&
                      activeWorkout.completed[exIndex][setIndex];

                    return (
                      <button
                        key={setIndex}
                        onClick={() =>
                          completeSet(exIndex, setIndex)
                        }
                        disabled={done}
                        className={`w-full flex items-center justify-between px-3 py-2 rounded-lg text-sm ${
                          done
                            ? "bg-green-500 text-black"
                            : "bg-[#2C2C2E] text-white"
                        }`}
                      >
                        <span>
                          Set {setIndex + 1} ‚Äî {ex.reps} reps
                        </span>
                        <span>{done ? "‚úÖ" : "Tap to complete"}</span>
                      </button>
                    );
                  })}
                </div>
              </div>
            ))}

            <button
              onClick={finishWorkout}
              className="w-full text-[#8E8E93] mt-4"
            >
              End Workout
            </button>
          </div>
        );

        // MODALS
        const GymCreatorModal = showGymCreator && (
          <div className="fixed inset-0 bg-black bg-opacity-60 flex items-end z-[999]">
            <div className="w-full bg-[#1C1C1E] rounded-t-3xl p-6 soft-border">
              <h2 className="text-xl font-semibold mb-4">
                Create Workout
              </h2>

              <input
                type="text"
                placeholder="Routine name"
                className="w-full mb-3 p-3 rounded-xl bg-[#2C2C2E]"
                value={newRoutineName}
                onChange={(e) => setNewRoutineName(e.target.value)}
              />

              <div className="mb-3">
                <div className="flex gap-2 mb-2">
                  <input
                    type="text"
                    placeholder="Exercise"
                    className="flex-1 p-3 rounded-xl bg-[#2C2C2E]"
                    value={newExerciseName}
                    onChange={(e) =>
                      setNewExerciseName(e.target.value)
                    }
                  />
                  <input
                    type="number"
                    placeholder="Sets"
                    className="w-20 p-3 rounded-xl bg-[#2C2C2E]"
                    value={newExerciseSets}
                    onChange={(e) =>
                      setNewExerciseSets(e.target.value)
                    }
                  />
                  <input
                    type="number"
                    placeholder="Reps"
                    className="w-20 p-3 rounded-xl bg-[#2C2C2E]"
                    value={newExerciseReps}
                    onChange={(e) =>
                      setNewExerciseReps(e.target.value)
                    }
                  />
                </div>

                <button
                  onClick={addTempExercise}
                  className="w-full bg-white text-black rounded-xl py-2 text-sm font-semibold"
                >
                  Add Exercise
                </button>
              </div>

              {tempExercises.length > 0 && (
                <div className="mb-4">
                  <p className="text-sm text-[#8E8E93] mb-1">
                    Exercises:
                  </p>
                  <ul className="text-sm text-[#E5E5EA] space-y-1">
                    {tempExercises.map((ex, i) => (
                      <li key={i}>
                        {ex.name} ‚Äî {ex.sets}√ó{ex.reps}
                      </li>
                    ))}
                  </ul>
                </div>
              )}

              {tempExercises.length > 0 && newRoutineName && (
                <>
                  <p className="text-sm text-[#8E8E93] mb-2">
                    Assign to day (optional)
                  </p>
                  <div className="grid grid-cols-7 gap-2 mb-4">
                    {WEEK_DAYS.map((day) => (
                      <button
                        key={day}
                        onClick={() => saveNewRoutineToDay(day)}
                        className="bg-[#2C2C2E] rounded-xl py-2 text-sm"
                      >
                        {day}
                      </button>
                    ))}
                  </div>
                </>
              )}

              <button
                onClick={saveNewRoutine}
                className="w-full bg-white text-black rounded-xl py-3 font-semibold mt-2"
              >
                Save Workout
              </button>

              <button
                onClick={() => {
                  setShowGymCreator(false);
                  setTempExercises([]);
                }}
                className="w-full text-[#8E8E93] mt-3"
              >
                Cancel
              </button>
            </div>
          </div>
        );

        const RunCreatorModal = showRunCreator && (
          <div className="fixed inset-0 bg-black bg-opacity-60 flex items-end z-[999]">
            <div className="w-full bg-[#1C1C1E] rounded-t-3xl p-6 soft-border">
              <h2 className="text-xl font-semibold mb-4">
                Create Running Routine
              </h2>

              <input
                type="text"
                placeholder="Type (e.g., Tempo, Easy, Long)"
                className="w-full mb-3 p-3 rounded-xl bg-[#2C2C2E]"
                value={newRunType}
                onChange={(e) => setNewRunType(e.target.value)}
              />

              <input
                type="number"
                placeholder="Distance (km)"
                className="w-full mb-3 p-3 rounded-xl bg-[#2C2C2E]"
                value={newRunDistance}
                onChange={(e) =>
                  setNewRunDistance(e.target.value)
                }
              />

              <input
                type="text"
                placeholder="Pace (e.g., 5:00/km)"
                className="w-full mb-3 p-3 rounded-xl bg-[#2C2C2E]"
                value={newRunPace}
                onChange={(e) => setNewRunPace(e.target.value)}
              />

              {newRunType && newRunDistance && newRunPace && (
                <>
                  <p className="text-sm text-[#8E8E93] mb-2">
                    Assign to day (optional)
                  </p>

                  <div className="grid grid-cols-7 gap-2 mb-4">
                    {WEEK_DAYS.map((day) => (
                      <button
                        key={day}
                        onClick={() =>
                          saveNewRunRoutineToDay(day)
                        }
                        className="bg-[#2C2C2E] rounded-xl py-2 text-sm"
                      >
                        {day}
                      </button>
                    ))}
                  </div>
                </>
              )}

              <button
                onClick={saveNewRunRoutine}
                className="w-full bg-white text-black rounded-xl py-3 font-semibold mt-2"
              >
                Save Running Routine
              </button>

              <button
                onClick={() => setShowRunCreator(false)}
                className="w-full text-[#8E8E93] mt-3"
              >
                Cancel
              </button>
            </div>
          </div>
        );

        const CreateChooserModal = showCreateChooser && (
          <div className="fixed inset-0 bg-black bg-opacity-60 flex items-end z-[999]">
            <div className="w-full bg-[#1C1C1E] rounded-t-3xl p-6 soft-border">
              <h2 className="text-xl font-semibold mb-4">Create</h2>

              <button
                onClick={() => {
                  setShowCreateChooser(false);
                  setShowGymCreator(true);
                }}
                className="w-full bg-[#2C2C2E] rounded-xl p-4 mb-3 text-left"
              >
                <p className="font-semibold">Gym Routine</p>
                <p className="text-sm text-[#8E8E93]">
                  Build a strength workout with exercises
                </p>
              </button>

              <button
                onClick={() => {
                  setShowCreateChooser(false);
                  setShowRunCreator(true);
                }}
                className="w-full bg-[#2C2C2E] rounded-xl p-4 mb-3 text-left"
              >
                <p className="font-semibold">Running Routine</p>
                <p className="text-sm text-[#8E8E93]">
                  Plan a structured run with distance and pace
                </p>
              </button>

              <button
                onClick={() => setShowCreateChooser(false)}
                className="w-full text-[#8E8E93] mt-3"
              >
                Cancel
              </button>
            </div>
          </div>
        );

        // FINAL RENDER
        return (
          <div className="w-full h-screen relative overflow-hidden">
            {tab === "home" && HomeTab}
            {tab === "calendar" && CalendarTab}
            {tab === "settings" && SettingsPage}
            {tab === "workout" && WorkoutTab}

            {/* BOTTOM NAV */}
            <div className="fixed bottom-4 left-0 right-0 flex justify-center z-[50]">
              <div className="glass-nav soft-border rounded-[24px] py-2.5 px-6 flex gap-10 items-center">
                <button
                  onClick={() => setTab("home")}
                  className={`flex flex-col items-center text-xs ${
                    tab === "home"
                      ? "text-white"
                      : "text-[#8E8E93]"
                  }`}
                >
                  <span className="mb-1">üè†</span>
                  <span>Home</span>
                </button>

                <button
                  onClick={() => setShowCreateChooser(true)}
                  className="flex flex-col items-center text-xs text-white"
                >
                  <span className="mb-1 text-2xl">Ôºã</span>
                  <span>Add</span>
                </button>

                <button
                  onClick={() => setTab("calendar")}
                  className={`flex flex-col items-center text-xs ${
                    tab === "calendar"
                      ? "text-white"
                      : "text-[#8E8E93]"
                  }`}
                >
                  <span className="mb-1">üìÖ</span>
                  <span>Calendar</span>
                </button>

                <button
                  onClick={() => setTab("settings")}
                  className={`flex flex-col items-center text-xs ${
                    tab === "settings"
                      ? "text-white"
                      : "text-[#8E8E93]"
                  }`}
                >
                  <span className="mb-1">‚öôÔ∏è</span>
                  <span>Settings</span>
                </button>
              </div>
            </div>

            {/* MODALS */}
            {GymCreatorModal}
            {RunCreatorModal}
            {CreateChooserModal}
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById("root")).render(
        <App />
      );
    </script>
  </body>
</html>
