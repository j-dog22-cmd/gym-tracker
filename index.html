<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fitness Planner</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React + Babel -->
  <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
    rel="stylesheet"
  />

  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: black;
      color: white;
    }

    .soft-border {
      border: 1px solid rgba(255, 255, 255, 0.08);
    }

    .glass-nav {
      background: rgba(255, 255, 255, 0.06);
      backdrop-filter: blur(20px);
    }

    .no-scrollbar::-webkit-scrollbar {
      display: none;
    }
  </style>
</head>

<body class="no-scrollbar">
  <div id="root"></div>

  <script type="text/babel">

/* -------------------------------------------
   GLOBAL HELPERS & UTILITIES
-------------------------------------------- */

const WEEK_DAYS = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];

function getWeekdayIndex(date) {
  const js = date.getDay();
  return (js + 6) % 7;
}

function isSameDay(a, b) {
  return (
    a.getFullYear() === b.getFullYear() &&
    a.getMonth() === b.getMonth() &&
    a.getDate() === b.getDate()
  );
}

function getStartOfMonth(date) {
  return new Date(date.getFullYear(), date.getMonth(), 1);
}

function getEndOfMonth(date) {
  return new Date(date.getFullYear(), date.getMonth() + 1, 0);
}

function getWeekOfMonth(dayNumber) {
  return Math.ceil(dayNumber / 7);
}

/* -------------------------------------------
   LOCAL STORAGE HELPERS
-------------------------------------------- */

function load(key, fallback) {
  try {
    const raw = localStorage.getItem(key);
    if (!raw) return fallback;
    return JSON.parse(raw);
  } catch {
    return fallback;
  }
}

function save(key, value) {
  localStorage.setItem(key, JSON.stringify(value));
}

/* -------------------------------------------
   PROGRESS RING COMPONENT
-------------------------------------------- */

function ProgressRing({ size = 80, progress = 0, color = "#22c55e" }) {
  const stroke = 6;
  const radius = (size - stroke) / 2;
  const circumference = 2 * Math.PI * radius;
  const offset = circumference * (1 - progress);

  return (
    <svg width={size} height={size}>
      <circle
        stroke="#2C2C2E"
        fill="transparent"
        strokeWidth={stroke}
        r={radius}
        cx={size / 2}
        cy={size / 2}
      />
      <circle
        stroke={color}
        fill="transparent"
        strokeWidth={stroke}
        strokeLinecap="round"
        strokeDasharray={circumference}
        strokeDashoffset={offset}
        r={radius}
        cx={size / 2}
        cy={size / 2}
        style={{ transition: "stroke-dashoffset 0.4s ease" }}
      />
    </svg>
  );
}

/* -------------------------------------------
   APP COMPONENT — FULL + COMPLETE
-------------------------------------------- */

function App() {

  /* -------------------------------------------
     STATE: WORKOUTS, RUNS, SETTINGS
  -------------------------------------------- */

  const [weeklyPlan, setWeeklyPlan] = React.useState(
    load("weeklyPlan", {
      Monday: null,
      Tuesday: null,
      Wednesday: null,
      Thursday: null,
      Friday: null,
      Saturday: null,
      Sunday: null,
    })
  );

  const [runPlan, setRunPlan] = React.useState(
    load("runPlan", {
      Monday: null,
      Tuesday: null,
      Wednesday: null,
      Thursday: null,
      Friday: null,
      Saturday: null,
      Sunday: null,
    })
  );

  const [workoutLogs, setWorkoutLogs] = React.useState(load("workoutLogs", []));
  const [runLogs, setRunLogs] = React.useState(load("runLogs", []));

  const [settings, setSettings] = React.useState(
    load("settings", {
      showAffirmations: true,
      showWeeklyProgress: true,
      showMonthlyGoal: true,
      showGraphs: true,
    })
  );

  const [tab, setTab] = React.useState("home");

  /* -------------------------------------------
     STATE: MODALS
  -------------------------------------------- */

  const [showGymCreator, setShowGymCreator] = React.useState(false);
  const [showRunCreator, setShowRunCreator] = React.useState(false);
  const [showCreateChooser, setShowCreateChooser] = React.useState(false);

  /* -------------------------------------------
     STATE: WORKOUT CREATION
  -------------------------------------------- */

  const [newRoutineName, setNewRoutineName] = React.useState("");
  const [newExerciseName, setNewExerciseName] = React.useState("");
  const [newExerciseSets, setNewExerciseSets] = React.useState("");
  const [newExerciseReps, setNewExerciseReps] = React.useState("");
  const [tempExercises, setTempExercises] = React.useState([]);

  /* -------------------------------------------
     STATE: RUN CREATION
  -------------------------------------------- */

  const [newRunType, setNewRunType] = React.useState("");
  const [newRunDistance, setNewRunDistance] = React.useState("");
  const [newRunPace, setNewRunPace] = React.useState("");

  /* -------------------------------------------
     STATE: WORKOUT EXECUTION
  -------------------------------------------- */

  const [activeWorkout, setActiveWorkout] = React.useState(null);

  /* -------------------------------------------
     STATE: DAY DETAILS
  -------------------------------------------- */

  const [selectedDay, setSelectedDay] = React.useState(null);

  /* -------------------------------------------
     STATE: CALENDAR MONTH
  -------------------------------------------- */

  const today = new Date();
  const [currentMonth, setCurrentMonth] = React.useState(
    new Date(today.getFullYear(), today.getMonth(), 1)
  );

  /* -------------------------------------------
     SAVE TO LOCAL STORAGE
  -------------------------------------------- */

  React.useEffect(() => save("weeklyPlan", weeklyPlan), [weeklyPlan]);
  React.useEffect(() => save("runPlan", runPlan), [runPlan]);
  React.useEffect(() => save("workoutLogs", workoutLogs), [workoutLogs]);
  React.useEffect(() => save("runLogs", runLogs), [runLogs]);
  React.useEffect(() => save("settings", settings), [settings]);

  /* -------------------------------------------
     CORE LOGIC — ADD EXERCISE
  -------------------------------------------- */

  function addTempExercise() {
    if (!newExerciseName || !newExerciseSets || !newExerciseReps) return;

    setTempExercises([
      ...tempExercises,
      {
        name: newExerciseName,
        sets: Number(newExerciseSets),
        reps: Number(newExerciseReps),
      },
    ]);

    setNewExerciseName("");
    setNewExerciseSets("");
    setNewExerciseReps("");
  }

  /* -------------------------------------------
     CORE LOGIC — SAVE NEW WORKOUT
  -------------------------------------------- */

  function saveNewRoutine() {
    if (!newRoutineName || tempExercises.length === 0) return;

    const routine = {
      name: newRoutineName,
      exercises: tempExercises,
    };

    const updated = { ...weeklyPlan };
    setWeeklyPlan(updated);

    setNewRoutineName("");
    setTempExercises([]);
    setShowGymCreator(false);
  }

  function saveNewRoutineToDay(day) {
    if (!newRoutineName || tempExercises.length === 0) return;

    const routine = {
      name: newRoutineName,
      exercises: tempExercises,
    };

    setWeeklyPlan({
      ...weeklyPlan,
      [day]: routine,
    });

    setNewRoutineName("");
    setTempExercises([]);
    setShowGymCreator(false);
  }

  /* -------------------------------------------
     CORE LOGIC — SAVE NEW RUN
  -------------------------------------------- */

  function saveNewRunRoutine() {
    if (!newRunType || !newRunDistance || !newRunPace) return;

    const routine = {
      type: newRunType,
      distance: Number(newRunDistance),
      pace: newRunPace,
    };

    setRunPlan({ ...runPlan, Monday: runPlan.Monday });

    setNewRunType("");
    setNewRunDistance("");
    setNewRunPace("");
    setShowRunCreator(false);
  }

  /* -------------------------------------------
     CORE LOGIC — START WORKOUT
  -------------------------------------------- */

  function startWorkout(routine) {
    const completed = routine.exercises.map((ex) =>
      Array(ex.sets).fill(false)
    );

    setActiveWorkout({
      routine,
      completed,
      resting: false,
      restTime: 0,
    });

    setTab("workout");
  }

  /* -------------------------------------------
     CORE LOGIC — COMPLETE SET
  -------------------------------------------- */

  function completeSet(exIndex, setIndex) {
    if (!activeWorkout) return;

    const updated = { ...activeWorkout };
    updated.completed[exIndex][setIndex] = true;

    updated.resting = true;
    updated.restTime = 60;

    setActiveWorkout(updated);

    const interval = setInterval(() => {
      setActiveWorkout((prev) => {
        if (!prev) return prev;

        if (prev.restTime <= 1) {
          clearInterval(interval);
          return { ...prev, resting: false, restTime: 0 };
        }

        return { ...prev, restTime: prev.restTime - 1 };
      });
    }, 1000);
  }

  /* -------------------------------------------
     CORE LOGIC — FINISH WORKOUT
  -------------------------------------------- */

  function finishWorkout() {
    if (!activeWorkout) return;

    const log = {
      date: new Date().toISOString(),
      routine: activeWorkout.routine.name,
    };

    setWorkoutLogs([...workoutLogs, log]);
    setActiveWorkout(null);
    setTab("home");
  }

  /* -------------------------------------------
     CORE LOGIC — DELETE ROUTINES
  -------------------------------------------- */

  function deleteGymRoutine(name) {
    const updated = { ...weeklyPlan };

    for (const day of WEEK_DAYS) {
      if (updated[day] && updated[day].name === name) {
        updated[day] = null;
      }
    }

    setWeeklyPlan(updated);
  }

  function deleteRunRoutine(type) {
    const updated = { ...runPlan };

    for (const day of WEEK_DAYS) {
      if (updated[day] && updated[day].type === type) {
        updated[day] = null;
      }
    }

    setRunPlan(updated);
  }

  /* -------------------------------------------
     CORE LOGIC — DAY DETAILS
  -------------------------------------------- */

  function openDayDetails(dayObj) {
    setSelectedDay(dayObj);
  }

  function closeDayDetails() {
    setSelectedDay(null);
  }

  /* -------------------------------------------
     CORE LOGIC — RESET APP
  -------------------------------------------- */

  function resetApp() {
    localStorage.clear();
    window.location.reload();
  }

  /* -------------------------------------------
     HOME TAB
  -------------------------------------------- */

  const HomeTab = (() => {
    const todayDate = new Date();
    const todayWeekday = WEEK_DAYS[getWeekdayIndex(todayDate)];
    const todayNumber = todayDate.getDate();

    const affirmations = [
      "Small steps add up.",
      "Stay consistent.",
      "You’re building momentum.",
      "Show up for yourself.",
      "Progress feels good.",
    ];
    const affirmationIndex = todayNumber % affirmations.length;

    const startOfWeek = (() => {
      const d = new Date(todayDate);
      const offset = getWeekdayIndex(d);
      d.setDate(d.getDate() - offset);
      return d;
    })();

    const weekDaysWithDates = WEEK_DAYS.map((day, idx) => {
      const d = new Date(startOfWeek);
      d.setDate(startOfWeek.getDate() + idx);
      return { label: day, date: d };
    });

    const completedWorkoutsThisWeek = workoutLogs.filter((log) => {
      const d = new Date(log.date);
      return (
        d >= startOfWeek &&
        d <= new Date(startOfWeek.getFullYear(), startOfWeek.getMonth(), startOfWeek.getDate() + 6)
      );
    }).length;

    const runCompletedThisWeek = runLogs.filter((log) => {
      const d = new Date(log.date);
      return (
        d >= startOfWeek &&
        d <= new Date(startOfWeek.getFullYear(), startOfWeek.getMonth(), startOfWeek.getDate() + 6)
      );
    }).length;

    const WEEKLY_GYM_GOAL = 4;
    const WEEKLY_RUN_GOAL = 3;

    const gymProgress = Math.min(completedWorkoutsThisWeek / WEEKLY_GYM_GOAL, 1);
    const runProgress = Math.min(runCompletedThisWeek / WEEKLY_RUN_GOAL, 1);

    const startOfMonth = getStartOfMonth(todayDate);
    const endOfMonth = getEndOfMonth(todayDate);

    const workoutsThisMonth = workoutLogs.filter((log) => {
      const d = new Date(log.date);
      return d >= startOfMonth && d <= endOfMonth;
    }).length;

    const MONTHLY_WORKOUT_GOAL = 16;
    const monthlyProgress = Math.min(workoutsThisMonth / MONTHLY_WORKOUT_GOAL, 1);

    return (
      <div className="w-full min-h-screen overflow-y-auto bg-black pb-40 px-4 pt-6">

        {settings.showAffirmations && (
          <div className="mb-4">
            <p className="text-xs text-[#8E8E93] mb-1">
              {affirmations[affirmationIndex]}
            </p>
            <div className="flex items-baseline gap-2">
              <h1 className="text-2xl font-semibold leading-tight">Today</h1>
              <span className="text-sm text-[#8E8E93]">
                {todayWeekday}, {todayNumber}
              </span>
            </div>
          </div>
        )}

        <h2 className="text-lg font-semibold mb-2">This Week</h2>

        <div className="flex justify-between mb-4">
          {weekDaysWithDates.map(({ label, date }) => {
            const weekday = label;
            const gym = weeklyPlan[weekday];
            const run = runPlan[weekday];
            const isToday = isSameDay(date, todayDate);

            let dotColor = null;
            if (gym && run) dotColor = "bg-white";
            else if (gym) dotColor = "bg-green-400";
            else if (run) dotColor = "bg-blue-400";

            return (
              <button
                key={weekday}
                onClick={() => openDayDetails({ weekday, date })}
                className={`
                  w-12 p-3 rounded-3xl soft-border bg-[#1C1C1E]
                  flex flex-col items-center transition-all
                  ${isToday ? "border border-red-500" : ""}
                `}
              >
                <p className="text-base font-semibold leading-none">
                  {date.getDate()}
                </p>
                <p className="text-xs text-[#8E8E93] leading-none mt-1">
                  {weekday.slice(0, 2)}
                </p>
                {dotColor && (
                  <div className={`w-2 h-2 ${dotColor} rounded-full mt-1`} />
                )}
              </button>
            );
          })}
        </div>

        {settings.showWeeklyProgress && (
          <div className="space-y-3 mb-6">

            <div className="w-full bg-[#1C1C1E] soft-border rounded-2xl p-4 flex items-center justify-between">
              <div>
                <p className="text-sm font-semibold mb-1">Gym Progress</p>
                <p className="text-xs text-[#8E8E93]">
                  {completedWorkoutsThisWeek}/{WEEKLY_GYM_GOAL} workouts this week
                </p>
              </div>
              <ProgressRing size={80} progress={gymProgress} color="#22c55e" />
            </div>

            <div className="w-full bg-[#1C1C1E] soft-border rounded-2xl p-4 flex items-center justify-between">
              <div>
                <p className="text-sm font-semibold mb-1">Running Progress</p>
                <p className="text-xs text-[#8E8E93]">
                  {runCompletedThisWeek}/{WEEKLY_RUN_GOAL} runs this week
                </p>
              </div>
              <ProgressRing size={80} progress={runProgress} color="#38bdf8" />
            </div>

          </div>
        )}

        <h2 className="text-lg font-semibold mb-3">Your Plan</h2>
                <div className="grid grid-cols-2 gap-3 mb-10">
          {[{ label: "Today", day: todayWeekday },
            { label: "Tomorrow", day: WEEK_DAYS[(getWeekdayIndex(todayDate) + 1) % 7] }
          ].map(({ label, day }) => {
            const routine = weeklyPlan[day];
            const run = runPlan[day];

            return (
              <div
                key={label}
                className="bg-[#1C1C1E] soft-border rounded-2xl p-4"
              >
                <p className="text-sm font-semibold mb-1">{label}</p>

                {routine ? (
                  <p className="text-green-400 text-sm mb-1">
                    Workout: {routine.name}
                  </p>
                ) : (
                  <p className="text-[#8E8E93] text-sm mb-1">
                    No workout planned
                  </p>
                )}

                {run ? (
                  <p className="text-blue-400 text-sm">
                    Run: {run.type} — {run.distance} km
                  </p>
                ) : (
                  <p className="text-[#8E8E93] text-sm">
                    No run planned
                  </p>
                )}
              </div>
            );
          })}
        </div>

        {settings.showMonthlyGoal && (
          <div className="w-full bg-[#1C1C1E] soft-border rounded-2xl p-4 mb-10">
            <p className="text-sm font-semibold mb-1">Monthly Goal</p>
            <p className="text-xs text-[#8E8E93] mb-3">
              {workoutsThisMonth}/{MONTHLY_WORKOUT_GOAL} workouts this month
            </p>
            <ProgressRing size={100} progress={monthlyProgress} color="#facc15" />
          </div>
        )}

      </div>
    );
  })();
    /* -------------------------------------------
     CALENDAR TAB
  -------------------------------------------- */

  const CalendarTab = (() => {
    const start = getStartOfMonth(currentMonth);
    const end = getEndOfMonth(currentMonth);

    const days = [];
    for (let d = 1; d <= end.getDate(); d++) {
      const date = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), d);
      days.push({
        date,
        weekday: WEEK_DAYS[getWeekdayIndex(date)],
        number: d,
      });
    }

    function prevMonth() {
      setCurrentMonth(
        new Date(currentMonth.getFullYear(), currentMonth.getMonth() - 1, 1)
      );
    }

    function nextMonth() {
      setCurrentMonth(
        new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1, 1)
      );
    }

    const monthName = currentMonth.toLocaleString("default", { month: "long" });
    const year = currentMonth.getFullYear();

    return (
      <div className="w-full min-h-screen bg-black px-4 pt-6 pb-40">

        {/* HEADER */}
        <div className="flex justify-between items-center mb-6">
          <button onClick={prevMonth} className="text-xl">‹</button>
          <h1 className="text-xl font-semibold">
            {monthName} {year}
          </h1>
          <button onClick={nextMonth} className="text-xl">›</button>
        </div>

        {/* WEEKDAY LABELS */}
        <div className="grid grid-cols-7 mb-2">
          {["M", "T", "W", "T", "F", "S", "S"].map((d) => (
            <p key={d} className="text-center text-[#8E8E93] text-xs">
              {d}
            </p>
          ))}
        </div>

        {/* CALENDAR GRID */}
        <div className="grid grid-cols-7 gap-2 mb-10">
          {days.map((dayObj) => {
            const { date, weekday, number } = dayObj;

            const gym = weeklyPlan[weekday];
            const run = runPlan[weekday];

            let dotColor = null;
            if (gym && run) dotColor = "bg-white";
            else if (gym) dotColor = "bg-green-400";
            else if (run) dotColor = "bg-blue-400";

            return (
              <button
                key={number}
                onClick={() => openDayDetails(dayObj)}
                className="w-full aspect-square bg-[#1C1C1E] soft-border rounded-xl flex flex-col items-center justify-center"
              >
                <p className="text-sm font-semibold">{number}</p>
                {dotColor && (
                  <div className={`w-2 h-2 ${dotColor} rounded-full mt-1`} />
                )}
              </button>
            );
          })}
        </div>

        {/* GRAPHS */}
        {settings.showGraphs && (
          <div className="space-y-6">
            {/* GYM GRAPH */}
            <div className="bg-[#1C1C1E] soft-border rounded-2xl p-4">
              <p className="text-sm font-semibold mb-2">Gym Activity</p>
              <p className="text-xs text-[#8E8E93] mb-4">
                Weekly workouts this month
              </p>

              <div className="flex items-end gap-2 h-24">
                {[1, 2, 3, 4].map((week) => {
                  const count = workoutLogs.filter((log) => {
                    const d = new Date(log.date);
                    return (
                      d.getMonth() === currentMonth.getMonth() &&
                      getWeekOfMonth(d.getDate()) === week
                    );
                  }).length;

                  return (
                    <div key={week} className="flex-1 flex flex-col items-center">
                      <div
                        className="w-full bg-green-500 rounded"
                        style={{ height: `${count * 20}px` }}
                      />
                      <p className="text-xs text-[#8E8E93] mt-1">W{week}</p>
                    </div>
                  );
                })}
              </div>
            </div>

            {/* RUN GRAPH */}
            <div className="bg-[#1C1C1E] soft-border rounded-2xl p-4">
              <p className="text-sm font-semibold mb-2">Running Activity</p>
              <p className="text-xs text-[#8E8E93] mb-4">
                Weekly runs this month
              </p>

              <div className="flex items-end gap-2 h-24">
                {[1, 2, 3, 4].map((week) => {
                  const count = runLogs.filter((log) => {
                    const d = new Date(log.date);
                    return (
                      d.getMonth() === currentMonth.getMonth() &&
                      getWeekOfMonth(d.getDate()) === week
                    );
                  }).length;

                  return (
                    <div key={week} className="flex-1 flex flex-col items-center">
                      <div
                        className="w-full bg-blue-500 rounded"
                        style={{ height: `${count * 20}px` }}
                      />
                      <p className="text-xs text-[#8E8E93] mt-1">W{week}</p>
                    </div>
                  );
                })}
              </div>
            </div>
          </div>
        )}

        {/* DAY DETAILS MODAL */}
        {selectedDay && (
          <div className="fixed inset-0 bg-black bg-opacity-60 flex items-end z-[999]">
            <div className="w-full bg-[#1C1C1E] rounded-t-3xl p-6 soft-border">

              <div className="flex justify-between items-center mb-4">
                <h2 className="text-xl font-semibold">
                  {selectedDay.weekday} {selectedDay.number}
                </h2>
                <button onClick={closeDayDetails} className="text-sm text-[#8E8E93]">
                  Close
                </button>
              </div>

              {/* GYM ROUTINE */}
              {(() => {
                const weekday = selectedDay.weekday;
                const routine = weeklyPlan[weekday];

                if (!routine) {
                  return (
                    <p className="text-sm text-[#8E8E93] mb-4">
                      No workout routine
                    </p>
                  );
                }

                return (
                  <div className="mb-4">
                    <p className="text-green-400 text-sm font-semibold mb-1">
                      Workout: {routine.name}
                    </p>

                    <button
                      onClick={() => deleteGymRoutine(routine.name)}
                      className="w-full bg-red-500 text-white rounded-xl py-2 mt-3 font-semibold"
                    >
                      Delete Workout
                    </button>
                  </div>
                );
              })()}

              {/* RUN ROUTINE */}
              {(() => {
                const weekday = selectedDay.weekday;
                const routine = runPlan[weekday];

                if (!routine) {
                  return (
                    <p className="text-sm text-[#8E8E93] mb-4">
                      No running routine
                    </p>
                  );
                }

                return (
                  <div className="mb-4">
                    <p className="text-blue-400 text-sm font-semibold mb-1">
                      Run: {routine.type}
                    </p>
                    <p className="text-sm text-[#8E8E93]">
                      {routine.distance} km — {routine.pace}
                    </p>

                    <button
                      onClick={() => deleteRunRoutine(routine.type)}
                      className="w-full bg-red-500 text-white rounded-xl py-2 mt-3 font-semibold"
                    >
                      Delete Run
                    </button>
                  </div>
                );
              })()}

            </div>
          </div>
        )}

      </div>
    );
  })();
    /* -------------------------------------------
     WORKOUT EXECUTION SCREEN
  -------------------------------------------- */

  const WorkoutScreen = (() => {
    if (!activeWorkout) {
      return (
        <div className="w-full min-h-screen bg-black text-center pt-20">
          <p className="text-[#8E8E93]">No active workout</p>
        </div>
      );
    }

    const routine = activeWorkout.routine;
    const completed = activeWorkout.completed;

    return (
      <div className="w-full min-h-screen bg-black px-4 pt-6 pb-40">

        {/* HEADER */}
        <div className="flex justify-between items-center mb-6">
          <h1 className="text-xl font-semibold">{routine.name}</h1>

          <button
            onClick={() => setActiveWorkout(null)}
            className="text-sm text-[#8E8E93]"
          >
            Exit
          </button>
        </div>

        {/* REST TIMER */}
        {activeWorkout.resting && (
          <div className="mb-6 bg-[#1C1C1E] soft-border rounded-2xl p-4 text-center">
            <p className="text-sm text-[#8E8E93] mb-1">Resting</p>
            <p className="text-3xl font-semibold">
              {activeWorkout.restTime}s
            </p>
          </div>
        )}

        {/* EXERCISES */}
        <div className="space-y-6">
          {routine.exercises.map((ex, exIndex) => (
            <div
              key={exIndex}
              className="bg-[#1C1C1E] soft-border rounded-2xl p-4"
            >
              <p className="text-sm font-semibold mb-2">{ex.name}</p>

              <div className="flex gap-2 flex-wrap">
                {completed[exIndex].map((isDone, setIndex) => (
                  <button
                    key={setIndex}
                    onClick={() => completeSet(exIndex, setIndex)}
                    disabled={isDone || activeWorkout.resting}
                    className={`
                      w-12 h-12 rounded-xl flex items-center justify-center
                      text-sm font-semibold transition-all
                      ${
                        isDone
                          ? "bg-green-500 text-black"
                          : "bg-[#2C2C2E] text-white soft-border"
                      }
                      ${activeWorkout.resting ? "opacity-40" : ""}
                    `}
                  >
                    {setIndex + 1}
                  </button>
                ))}
              </div>
            </div>
          ))}
        </div>

        {/* FINISH BUTTON */}
        <button
          onClick={finishWorkout}
          className="w-full bg-white text-black rounded-2xl py-3 font-semibold mt-10"
        >
          Finish Workout
        </button>

      </div>
    );
  })();
    /* -------------------------------------------
     MODALS — GYM CREATOR, RUN CREATOR, CHOOSER
  -------------------------------------------- */

  function ModalWrapper({ children, onClose }) {
    return (
      <div className="fixed inset-0 bg-black bg-opacity-60 flex items-end z-[999]">
        <div className="w-full bg-[#1C1C1E] rounded-t-3xl p-6 soft-border">
          <div className="flex justify-end mb-4">
            <button
              onClick={onClose}
              className="text-sm text-[#8E8E93]"
            >
              Close
            </button>
          </div>
          {children}
        </div>
      </div>
    );
  }

  /* -------------------------------------------
     CREATE CHOOSER MODAL
  -------------------------------------------- */

  const CreateChooserModal = () => (
    <ModalWrapper onClose={() => setShowCreateChooser(false)}>
      <h2 className="text-xl font-semibold mb-4">Create</h2>

      <div className="space-y-3">
        <button
          onClick={() => {
            setShowCreateChooser(false);
            setShowGymCreator(true);
          }}
          className="w-full bg-[#2C2C2E] soft-border rounded-xl py-3 font-semibold"
        >
          New Workout
        </button>

        <button
          onClick={() => {
            setShowCreateChooser(false);
            setShowRunCreator(true);
          }}
          className="w-full bg-[#2C2C2E] soft-border rounded-xl py-3 font-semibold"
        >
          New Run
        </button>
      </div>
    </ModalWrapper>
  );

  /* -------------------------------------------
     GYM CREATOR MODAL
  -------------------------------------------- */

  const GymCreatorModal = () => (
    <ModalWrapper onClose={() => setShowGymCreator(false)}>
      <h2 className="text-xl font-semibold mb-4">New Workout</h2>

      {/* Routine Name */}
      <div className="mb-4">
        <p className="text-sm text-[#8E8E93] mb-1">Routine Name</p>
        <input
          value={newRoutineName}
          onChange={(e) => setNewRoutineName(e.target.value)}
          className="w-full bg-[#2C2C2E] soft-border rounded-xl p-3 text-sm"
          placeholder="Push Day"
        />
      </div>

      {/* Add Exercise */}
      <div className="mb-4">
        <p className="text-sm text-[#8E8E93] mb-2">Add Exercise</p>

        <input
          value={newExerciseName}
          onChange={(e) => setNewExerciseName(e.target.value)}
          className="w-full bg-[#2C2C2E] soft-border rounded-xl p-3 text-sm mb-2"
          placeholder="Bench Press"
        />

        <div className="flex gap-2 mb-2">
          <input
            value={newExerciseSets}
            onChange={(e) => setNewExerciseSets(e.target.value)}
            className="w-1/2 bg-[#2C2C2E] soft-border rounded-xl p-3 text-sm"
            placeholder="Sets"
            type="number"
          />
          <input
            value={newExerciseReps}
            onChange={(e) => setNewExerciseReps(e.target.value)}
            className="w-1/2 bg-[#2C2C2E] soft-border rounded-xl p-3 text-sm"
            placeholder="Reps"
            type="number"
          />
        </div>

        <button
          onClick={addTempExercise}
          className="w-full bg-white text-black rounded-xl py-2 font-semibold"
        >
          Add Exercise
        </button>
      </div>

      {/* Exercise List */}
      {tempExercises.length > 0 && (
        <div className="mb-6">
          <p className="text-sm font-semibold mb-2">Exercises</p>
          <div className="space-y-2">
            {tempExercises.map((ex, i) => (
              <div
                key={i}
                className="bg-[#2C2C2E] soft-border rounded-xl p-3 text-sm"
              >
                {ex.name} — {ex.sets}×{ex.reps}
              </div>
            ))}
          </div>
        </div>
      )}

      {/* Save */}
      <button
        onClick={saveNewRoutine}
        className="w-full bg-green-500 text-black rounded-xl py-3 font-semibold"
      >
        Save Workout
      </button>
    </ModalWrapper>
  );
    /* -------------------------------------------
     RUN CREATOR MODAL
  -------------------------------------------- */

  const RunCreatorModal = () => (
    <ModalWrapper onClose={() => setShowRunCreator(false)}>
      <h2 className="text-xl font-semibold mb-4">New Run</h2>

      {/* Run Type */}
      <div className="mb-4">
        <p className="text-sm text-[#8E8E93] mb-1">Run Type</p>
        <input
          value={newRunType}
          onChange={(e) => setNewRunType(e.target.value)}
          className="w-full bg-[#2C2C2E] soft-border rounded-xl p-3 text-sm"
          placeholder="Easy Run"
        />
      </div>

      {/* Distance */}
      <div className="mb-4">
        <p className="text-sm text-[#8E8E93] mb-1">Distance (km)</p>
        <input
          value={newRunDistance}
          onChange={(e) => setNewRunDistance(e.target.value)}
          className="w-full bg-[#2C2C2E] soft-border rounded-xl p-3 text-sm"
          placeholder="5"
          type="number"
        />
      </div>

      {/* Pace */}
      <div className="mb-6">
        <p className="text-sm text-[#8E8E93] mb-1">Pace</p>
        <input
          value={newRunPace}
          onChange={(e) => setNewRunPace(e.target.value)}
          className="w-full bg-[#2C2C2E] soft-border rounded-xl p-3 text-sm"
          placeholder="5:30 /km"
        />
      </div>

      {/* Save */}
      <button
        onClick={saveNewRunRoutine}
        className="w-full bg-blue-500 text-black rounded-xl py-3 font-semibold"
      >
        Save Run
      </button>
    </ModalWrapper>
  );
    /* -------------------------------------------
     SETTINGS TAB
  -------------------------------------------- */

  const SettingsTab = (() => {
    function toggleSetting(key) {
      setSettings({
        ...settings,
        [key]: !settings[key],
      });
    }

    return (
      <div className="w-full min-h-screen bg-black px-4 pt-6 pb-40">
        <h1 className="text-xl font-semibold mb-6">Settings</h1>

        {/* TOGGLES */}
        <div className="space-y-4 mb-10">

          {/* Affirmations */}
          <div className="bg-[#1C1C1E] soft-border rounded-2xl p-4 flex justify-between items-center">
            <div>
              <p className="text-sm font-semibold">Show Affirmations</p>
              <p className="text-xs text-[#8E8E93]">Daily motivational message</p>
            </div>

            <button
              onClick={() => toggleSetting("showAffirmations")}
              className={`
                w-12 h-6 rounded-full transition-all
                ${settings.showAffirmations ? "bg-green-500" : "bg-[#2C2C2E]"}
              `}
            >
              <div
                className={`
                  w-5 h-5 bg-white rounded-full transform transition-all
                  ${settings.showAffirmations ? "translate-x-6" : "translate-x-1"}
                `}
              />
            </button>
          </div>

          {/* Weekly Progress */}
          <div className="bg-[#1C1C1E] soft-border rounded-2xl p-4 flex justify-between items-center">
            <div>
              <p className="text-sm font-semibold">Show Weekly Progress</p>
              <p className="text-xs text-[#8E8E93]">Gym + running progress rings</p>
            </div>

            <button
              onClick={() => toggleSetting("showWeeklyProgress")}
              className={`
                w-12 h-6 rounded-full transition-all
                ${settings.showWeeklyProgress ? "bg-green-500" : "bg-[#2C2C2E]"}
              `}
            >
              <div
                className={`
                  w-5 h-5 bg-white rounded-full transform transition-all
                  ${settings.showWeeklyProgress ? "translate-x-6" : "translate-x-1"}
                `}
              />
            </button>
          </div>

          {/* Monthly Goal */}
          <div className="bg-[#1C1C1E] soft-border rounded-2xl p-4 flex justify-between items-center">
            <div>
              <p className="text-sm font-semibold">Show Monthly Goal</p>
              <p className="text-xs text-[#8E8E93]">Workout target for the month</p>
            </div>

            <button
              onClick={() => toggleSetting("showMonthlyGoal")}
              className={`
                w-12 h-6 rounded-full transition-all
                ${settings.showMonthlyGoal ? "bg-green-500" : "bg-[#2C2C2E]"}
              `}
            >
              <div
                className={`
                  w-5 h-5 bg-white rounded-full transform transition-all
                  ${settings.showMonthlyGoal ? "translate-x-6" : "translate-x-1"}
                `}
              />
            </button>
          </div>

          {/* Graphs */}
          <div className="bg-[#1C1C1E] soft-border rounded-2xl p-4 flex justify-between items-center">
            <div>
              <p className="text-sm font-semibold">Show Graphs</p>
              <p className="text-xs text-[#8E8E93]">Weekly gym + run graphs</p>
            </div>

            <button
              onClick={() => toggleSetting("showGraphs")}
              className={`
                w-12 h-6 rounded-full transition-all
                ${settings.showGraphs ? "bg-green-500" : "bg-[#2C2C2E]"}
              `}
            >
              <div
                className={`
                  w-5 h-5 bg-white rounded-full transform transition-all
                  ${settings.showGraphs ? "translate-x-6" : "translate-x-1"}
                `}
              />
            </button>
          </div>

        </div>

        {/* RESET APP */}
        <div className="bg-[#1C1C1E] soft-border rounded-2xl p-4 mb-10">
          <p className="text-sm font-semibold mb-2">Reset App</p>
          <p className="text-xs text-[#8E8E93] mb-4">
            Clears all workouts, runs, logs, and settings.
          </p>

          <button
            onClick={resetApp}
            className="w-full bg-red-500 text-white rounded-xl py-3 font-semibold"
          >
            Reset Everything
          </button>
        </div>

        {/* ABOUT */}
        <div className="bg-[#1C1C1E] soft-border rounded-2xl p-4">
          <p className="text-sm font-semibold mb-1">About</p>
          <p className="text-xs text-[#8E8E93]">
            Fitness Planner — built for clarity, consistency, and momentum.
          </p>
        </div>
      </div>
    );
  })();
    /* -------------------------------------------
     FINAL APP RENDER + NAVIGATION + FLOATING BUTTON
  -------------------------------------------- */

  return (
    <div className="relative w-full min-h-screen bg-black">

      {/* ACTIVE TAB */}
      {tab === "home" && <HomeTab />}
      {tab === "calendar" && <CalendarTab />}
      {tab === "workout" && <WorkoutScreen />}
      {tab === "settings" && <SettingsTab />}

      {/* FLOATING + BUTTON */}
      {tab !== "workout" && (
        <button
          onClick={() => setShowCreateChooser(true)}
          className="
            fixed top-4 right-4
            w-10 h-10
            rounded-full
            bg-[#1C1C1E]
            soft-border
            flex items-center justify-center
            text-white
            shadow-lg
            z-[999]
          "
        >
          <span className="text-xl leading-none">+</span>
        </button>
      )}

      {/* BOTTOM NAV */}
      <div
        className="
          fixed bottom-0 left-0 w-full
          glass-nav soft-border
          border-t border-white/10
          flex justify-around items-center
          py-3
          z-[998]
        "
      >
        <button
          onClick={() => setTab("home")}
          className={`text-sm ${
            tab === "home" ? "text-white font-semibold" : "text-[#8E8E93]"
          }`}
        >
          Home
        </button>

        <button
          onClick={() => setTab("calendar")}
          className={`text-sm ${
            tab === "calendar" ? "text-white font-semibold" : "text-[#8E8E93]"
          }`}
        >
          Calendar
        </button>

        <button
          onClick={() => setTab("settings")}
          className={`text-sm ${
            tab === "settings" ? "text-white font-semibold" : "text-[#8E8E93]"
          }`}
        >
          Settings
        </button>
      </div>

      {/* MODALS */}
      {showCreateChooser && <CreateChooserModal />}
      {showGymCreator && <GymCreatorModal />}
      {showRunCreator && <RunCreatorModal />}

    </div>
  );
}
    /* -------------------------------------------
   RENDER APP
-------------------------------------------- */

ReactDOM.render(<App />, document.getElementById("root"));
</script>
</body>
</html>
